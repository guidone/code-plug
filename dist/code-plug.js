define("code-plug",["lodash","prop-types","react"],(e,t,r)=>(()=>{"use strict";var n={592:(e,t,r)=>{r.r(t),r.d(t,{CodePlug:()=>f,Consumer:()=>_,Views:()=>P,Items:()=>k,Plugin:()=>O,PlugItUserPermissions:()=>T,plug:()=>g,withCodePlug:()=>S,useCodePlug:()=>I});var n=r(297),o=r.n(n),s=r(229),i=r.n(s),l=r(804),p=r.n(l);const u=e=>"function"==typeof e,a=e=>null!=e?e:[],c={};function g(e,t,r={}){if(null==e||""===e)throw new Error("Region is a required parameter");return null==c[e]&&(c[e]=[]),c[e].push({view:t,props:r}),this}const d=o().createContext({plugins:[]});function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class m extends o().Component{constructor(e){super(e),this.getItems=this.getItems.bind(this),this.state={plugins:[],allPlugins:[]}}getHooks(){const{plugins:e}=this.props;return e.filter(e=>{return u(e)&&!(null!=(t=e)&&null!=t.prototype&&null!=t.prototype.register);var t})}getPlugins(){return this.state.plugins}getAllPlugins(){return this.state.allPlugins}debug(){this.state.allPlugins.forEach(e=>{console.log("- ",e.description.name,`(id: ${e.description.id}, ver:${e.description.version})`)})}getItems(e,t=null){const{plugins:r}=this.state;return[...a(c[e]).map(e=>({view:e.view,props:u(e.props)?e.props(t):e.props,plugin:null})).reduce((e,t)=>e.concat(t),[]).filter(Boolean),...r.map(r=>a(r.getViews(e)).map(e=>({view:e.view,props:u(e.props)?e.props(t):e.props,plugin:r}))).reduce((e,t)=>e.concat(t),[]).filter(Boolean)]}render(){const{plugins:e}=this.state,{children:t}=this.props;return o().createElement(d.Provider,{value:{plugins:e,codePlug:this}},u(t)?t(this):t)}}h(m,"defaultProps",{debug:!1,plugins:[],hooks:[],hash:e=>e.length}),h(m,"getDerivedStateFromProps",(function(e,t){const{plugins:r,hooks:n,hash:o,...s}=e;if(null==t||null==t.plugins||o(t.allPlugins)!==o(e.plugins)){return{plugins:(r||[]).filter(t=>((e,t,r)=>{let n=!0;return e.forEach(e=>{n&&(n=!!e.call({props:r},t))}),n})(n,t,e)).map(e=>new e(s)),allPlugins:[...r]}}return null}));const f=m,y=(e,t)=>{const r=null!=t&&null!=t.id?"-"+t.id:"";return null!=e&&null!=e.displayName?`${e.displayName}${r}`:null!=e&&null!=e.prototype&&null!=e.prototype.constructor&&null!=e.prototype.constructor.displayName?`${e.prototype.constructor.displayName}${r}`:null!=e&&null!=e.prototype&&null!=e.prototype.namespace?`${e.prototype.namespace}${r}`:null!=e&&null!=e.name?`${e.name}${r}`:""!==r?r:void console.log('Both the "namespace" and "displayName" properties were missing from a registered view,\n      it\'s needed to generate the correct key reference for child components in React')};function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class w extends o().Component{render(){const{region:e,children:t}=this.props,{region:r,...s}=this.props,{plugins:i}=this.context,l=i.map(r=>(r.getViews(e)||[]).map(e=>{const n=u(e.props)?e.props(s):{...e.props},i=e.view;return"function"==typeof t?t(i,{key:y(i,n),...s,...n},r):o().createElement(i,v({key:y(i,n)},s,n))})).reduce((e,t)=>e.concat(t),[]).filter(Boolean),p=(c[e]||[]).map(e=>{const r=u(e.props)?e.props(s):{...e.props},n=e.view;return"function"==typeof t?t(n,{key:y(n,r),...s,...r}):o().createElement(n,v({key:y(n,r)},s,r))});return o().createElement(n.Fragment,null,[...l,...p])}}b(w,"contextType",d),b(w,"propTypes",{style:i().object,region:i().oneOfType([i().string,i().array]).isRequired});const P=w;class O{constructor(e){var t,r,n;n="plugin",(r="className")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this._views={}}register(e,t,r){if(null==e||""===e)throw new Error("Region is a required parameter");return 2===arguments.length?r=t:1===arguments.length&&(t=null,r={}),null==this._views[e]&&(this._views[e]=[]),this._views[e].push({view:t,props:r}),this}getViews(e){return(Array.isArray(e)?e:[e]).reduce((e,t)=>null!=this._views[t]?[...e,...this._views[t]]:e,[]).filter(Boolean)}}class j extends o().Component{render(){const{region:e,children:t}=this.props,{region:r,...s}=this.props,{plugins:i}=this.context,l=i.map(t=>(t.getViews(e)||[]).map(e=>({view:e.view,props:u(e.props)?e.props(s):e.props,plugin:t}))).reduce((e,t)=>e.concat(t),[]).filter(Boolean);return o().createElement(n.Fragment,null,t(l))}}var x,$,E;E=d,($="contextType")in(x=j)?Object.defineProperty(x,$,{value:E,enumerable:!0,configurable:!0,writable:!0}):x[$]=E;const k=j;class C extends o().Component{render(){const{codePlug:e}=this.context;return o().createElement(n.Fragment,null,u(this.props.children)?this.props.children(e):this.props.children)}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(C,"contextType",d);const _=C;function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const S=e=>({children:t,...r})=>o().createElement(d.Consumer,null,({codePlug:n})=>o().createElement(e,N({},r,{codePlug:n}),t)),T=function(e){const{user:t,debug:r}=this.props||{},n=null!=e&&null!=e.prototype&&null!=e.prototype.constructor?e.prototype.constructor.permission:null;if(null!=t&&null!=t.permissions&&t.permissions.includes(n))return!0;r&&console.log(`Plugin ${null!=e?e.name:"unnamed"} not loaded, missing ${n}!`)},B=(e,t)=>!!p().isEmpty(t)||Object.keys(t).every(r=>p().isEmpty(e[r])||((e,t)=>{if(p().isString(t)||p().isNumber(t))return e===t||"*"===t;if(p().isObject(t)&&Object.keys(t).length>1)throw"Multiple keys not allowed in predicate "+JSON.stringify(t);if(p().isObject(t)&&1===Object.keys(t).length){const r=Object.keys(t)[0],n=t[r];if("$in"===r){if(!p().isArray(n))throw"The $in operators requires an array of values";return n.includes(e)||n.includes("*")}if("$intersect"===r)return n.includes("*")||0!==p().intersection(n,p().isArray(e)?e:[e]).length}throw"Unable to test condition for: "+JSON.stringify(t)})(e[r],t[r])),I=(e,t=null)=>{const{codePlug:r}=(0,n.useContext)(d),o=r.getItems(e).filter(e=>B(e.props,t));return{codePlug:r,items:o,props:o.map(e=>e.props)}}},804:t=>{t.exports=e},229:e=>{e.exports=t},297:e=>{e.exports=r}},o={};function s(e){if(o[e])return o[e].exports;var t=o[e]={exports:{}};return n[e](t,t.exports,s),t.exports}return s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s(592)})());